<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Playa Juan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Estilos externos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.css">
  <!-- Scripts externos -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <!-- Estilos personalizados -->
  <link rel="stylesheet" href="./style.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon.png">
</head>
<body>

<div class="beach_wrapper">
  <div class="sunbed toggle">
    <label class="sunbed_name"></label>
    <div>
      <form class="form">
        <input type="text" class="customer_name">
      </form>
    </div>
    <!-- Aquí añades el círculo -->
   <div class="circle toggle" id="circle1" data-actual-step="0"></div>
<div class="circle toggle" id="circle2" data-actual-step="0"></div>
<div class="circle toggle" id="circle3" data-actual-step="0"></div>
<!-- Puedes agregar más círculos según lo necesites -->
<!-- Agrega más círculos según sea necesario -->
  </div>
  <!-- Repite la estructura para más hamacas -->



  <!-- Calculadora de cobro -->
<!-- Calculadora de cobro -->
<div class="calculator-footer">
  <h2>Cobro</h2>
  <div id="fecha-cobro" style="font-size:50px; color:#666; margin-bottom:10px;"></div>

  <label for="hamaca">Hamaca:</label>
  <input type="number" id="hamaca" placeholder="" required>

  <label for="totalSelect">Pagar&nbsp;(€):</label>
  <select id="totalSelect">
    <option value="8">8€ 1 hamaca</option>
    <option value="16">16€ 2 hamacas</option>
    <option value="24">24€ 3 hamacas</option>
    <option value="32">32€ 4 hamacas</option>
    <option value="40">40€ 5 hamacas</option>
    <option value="48">48€ 6 hamacas</option>
    <option value="56">56€ 7 hamacas</option>
    <option value="64">64€ 8 hamacas</option>
    <option value="72">72€ 9 hamacas</option>
    <option value="80">80€ 10 hamacas</option>
  </select>
  <input type="number" id="totalManual" placeholder="Otra cantidad" step="0.01">

  <label for="recibidoManual">Recibido&nbsp;(€):</label>
  <input type="number" id="recibidoManual" placeholder="" step="0.01">

  <label for="pago">Método:</label>
  <select id="pago">
    <option value="efectivo">Efectivo</option>
    <option value="tarjeta">Tarjeta</option>
  </select>

  <label for="sombrillaExtra">Sombrilla Extra:</label>
  <select id="sombrillaExtra">
    <option value="no">No</option>
    <option value="si">Sí (+4€)</option>
  </select>

  <button onclick="calcularCambio()">Calcular</button>

  <div class="cambio" id="resultado"></div>

  <div class="registro">
    <h4>Registro Total <span class="fecha" id="fecha"></span></h4>
    <p>Efectivo acumulado: €<span id="totalEfectivo">0.00</span></p>
    <p>Tarjeta acumulado: €<span id="totalTarjeta">0.00</span></p>
    <p><strong>Total general: €<span id="totalGeneral">0.00</span></strong></p>

    <button id="mostrarHistorial" onclick="toggleHistorial()">Mostrar Historial</button>

    <div id="historialContainer">
      <h4>Historial de pagos:</h4>
      <ul id="historial"></ul>
      <div class="historial-nav">
        <button onclick="scrollHistorial('up')">↑</button>
        <button onclick="scrollHistorial('down')">↓</button>
      </div>
    </div>

    <!-- Botones debajo -->
    <div class="button-container">
      <button onclick="descargarHistorial()">Descargar historial resumen(CSV)</button>
      <button onclick="reiniciarCalculadora()">Reiniciar calculadora</button>
      <button onclick="procesarDevolucion()">Devolución</button> 
      <button onclick="descargarLog()">Log</button><!-- Botón de devolución debajo -->
    </div>
  </div>
</div>
<!-- Scripts personalizados -->
<script src="./script.js"></script>

<!-- Menú contextual de colores -->
<div class="color-context-menu" id="colorContextMenu" role="menu" aria-label="Selector de colores">
  <div class="color-option step1" data-step="1" data-label="Disponible" role="menuitem" tabindex="0" aria-label="Color disponible"></div>
  <div class="color-option step2" data-step="2" data-label="Ocupado" role="menuitem" tabindex="0" aria-label="Color ocupado"></div>
  <div class="color-option step3" data-step="3" data-label="Reservado" role="menuitem" tabindex="0" aria-label="Color reservado"></div>
  <div class="color-option step4" data-step="4" data-label="Mantenimiento" role="menuitem" tabindex="0" aria-label="Color mantenimiento"></div>
  <div class="color-option step5" data-step="5" data-label="Especial" role="menuitem" tabindex="0" aria-label="Color especial"></div>
  <div class="color-option step6" data-step="6" data-label="No disponible" role="menuitem" tabindex="0" aria-label="Color no disponible"></div>
</div>

<!-- Botonera anclada abajo -->
<div class="botonera-fija">
  <button class="fab" id="menu-toggle">☰</button>
  <div class="menu-desplegable" id="menu">
    <button onclick="SunbedController.reset_local_storage_except_customers();">Reset Colors</button>
    <button onclick="toggleDesconectadosFila0(1)">Fila0</button>
    <button onclick="toggledesconectadosFila1(1)">Fila1</button>
    <button onclick="toggledesconectadosFila2(1)">Fila2</button>
    <button onclick="toggledesconectadosFila3(1)">Fila3</button>
    <button onclick="toggledesconectadosFila4(1)">Fila4</button>
    <button onclick="toggleDesconectadosFila8(1)">Fila8</button>
    <button onclick="toggleZonalibre()">ZonaLibre1</button>
    <button onclick="toggleZonalibre2(1)">ZonaLibre2</button>
    <button onclick="toggleclon10A(1)">Clon10A</button>
    <button onclick="toggleclon0(1)">Clon0</button>
    <button onclick="toggleCircles()">Sombrillas</button>
    <button onclick="clearClick(1)">Reset Local Storage</button>
  </div>
</div>
<!-- Fin botonera anclada abajo -->

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
  // Configuración de Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyBpTV1quq0mX0fQ9f33a0n3SMHFvFUknek",
    authDomain: "movil-26943.firebaseapp.com",
    projectId: "movil-26943",
    storageBucket: "movil-26943.firebasestorage.app",
    messagingSenderId: "978593311158",
    appId: "1:978593311158:web:7464a2e217a70ee215b917"
  };
  // Inicializar Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
</script>
<!-- Scripts personalizados SIEMPRE después de Firebase y su inicialización -->
<script src="script.js"></script>

<script>
// Registro del Service Worker con ruta relativa para GitHub Pages
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js')
      .then((reg) => { console.log("Service Worker registrado", reg); })
      .catch((err) => { console.error("Error al registrar el Service Worker", err); });
  });
}
</script>
</body>
</html>
